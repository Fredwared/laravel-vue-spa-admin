# Laravel-SPA-Admin 项目简要介绍

## 更新日志
- 更新时间： 2017-09-17  - 更新人员： 胡中园


## 项目简要介绍
该项目是一个单页面形态的后台管理系统, 已内置权限管理模块

### 项目技术栈
- 后端:
  - laravel 5.4 
  - mysql 5.7
  - mongodb
- 前端:
  - vue + vue-router + vuex
  - element-ui

### 项目现有功能
- 系统初始化
  - 设置系统的名称,标题,主题色,logo图片等 (待完善)
  - 设置系统的左侧菜单
- 权限管理
  - 管理角色和用户,如创建角色,分配用户,分配左侧菜单,分配接口权限,分配路由权限等
  - 权限拦截,包括接口权限拦截和路由权限拦截

### 项目整体思路:
- 前端是一个 spa 应用,页面元素的形式,页面元素之间的组织关系,页面与页面之间的跳转等全部在浏览器端由 js 负责处理
- 前端通过 `http://app.domain/api/foo/bar` 的形式,向后端发起 ajax 请求获取数据,再将数据渲染到页面中
- 后端除了 `App\Http\Controllers\AppController` 这个控制器是返回一个 html 响应之外,其他的控制器全部只提供 json 类型(以及二进制流等类型)的 api 响应
- 第一次访问网站时,会进入 install 模式,此模式下, 需要通过命令行生成一个临时的 installer 账号,并由 installer 账号进行项目的初始化设置,如设置系统菜单,创建第一个用户等
- 初始化完成之后,installer 账户将失效,与此同时,你可以用刚才 installer 账户创建的用户进行登录,开始真正地使用该应用

### 与传统的多页面后台的不同之处
- 当浏览器的 url 发生更改时,页面并不会刷新
  - 单页面更改 url ,实际更改的是浏览器的 history
  - 多页面更改 url ,实际更改的是浏览器的 location (以及 history)
- 当用户手动按 F5 来刷新页面时，不管刷新的页面的路径是什么，服务器统一返回一个相同的页面,其具体逻辑是: 后端统一通过 `App\Http\Controllers\AppController` 的 `index` 方法进行处理,并且,该 `index` 方法不做任何查询,全都返回一个相同的 view 模板.该模板中仅包含一个空的 `<div></div>` 以及一个 `app.js` 
- 不同页面的访问权限不再由后端控制,而是单纯由前端控制
- 不同接口的访问权限会先经过前端的检查,前端通过的情况下,再经过后端的检查. 正常情况下,如果该用户不具备某个接口的访问权限,那么该接口的 ajax 请求会被前端直接拦截并提示,不会请求到后端
